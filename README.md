# GRAPH-BASED FOOTBALL MARKET ANALYSIS
The following project contains a graph-based analysis of the football's transactions market.
The main goal is to inferee the relationships in the football's transfer market, in terms of most central teams in the networks,
most important actors in the capital gain generation and teams communities. Every further detail is provided in the file _REPORT.pdf_ (italian).
The same information is synthesized and exhibited in english in the file _POSTER.pdf_.
We also provide in this Readme an overview of the most important points.  

## RESEARCH QUESTIONS 
We aim to answer the following reserch questions:
- What are the main relationships between the teams of the 7 major European leagues in terms of the sports market?
- What are the main relationships between football clubs and agents in terms of the sports market?
- What are the relationships between the world's football leagues in terms of player transfers?
- Is there a relationship between the capital gains generated by the teams and their sports results?

## DATA GATHERING
The dataset are created with dedicated web scrapers available in the repository's Jupyter notebooks and collected from the website [transfermarkt](https://www.transfermarkt.com/).
In particular, the main scraper (scraper.ipynb) is an improvement of [this](https://github.com/d2ski/football-transfers-data/tree/main) software.
We provide 4 datasets in csv format:
- **transfers_complete.csv**: every transaction from 2009 summer session and 2024 winter session, related to the main 7 european football leagues (Premier League, Serie A, LaLiga, Ligue 1, Bundesliga, Eredivisie, Liga Portugal);
- **transfers_with_agents.csv**: transfers_complete with the agent agency of the footballer (when available);
- **capital_gains.csv**: capital gains calculated as difference between the price of sale and the price of purchase (when available) for the same player and the same team;
- **champ_performances_with_metrics.csv**: team performances for every season in the considered temporal interval.

## METHODOLOGY
The analysis is carried on with the following techniques:
- **Exploration analysis**: charts to explore the general relationships in the data;
- **Graph analysis:**: graphs generated with [networkx](https://networkx.org/);
- **Communities:**: identification of the main communities with [Louvain](https://en.wikipedia.org/wiki/Louvain_method);
- **Metrics**: simultaneously with the graph and communities analysis, we provied dedicated metrics to describe the main characteristics of the networks. We developed a dedicate metric to evaluate the teams' performances (check the report for details).

## RESULTS
We synthesize the most interesting results:
- The most central teams in terms of capital gain are Chelsea, Roma and Juventus. The biggest ones (capital gain total amount) are Benfica and Ajax.
- We identified 5 communities, each one involving a specific teams' nationality, except for the most heterogeneous community 3.
- The main agents' agencies are "Wasserman", "CAA Stellar" and "Unique Sports Group". There is a huge amount of free agents, because of the unavailable data.
- The most central leagues (nations) involved in the transfers network are Netherlands, Portugal and Spain, with England as the most wealthy league.
- There is not a consistent relationship between capital gain and performance.

Here a few plots about the above results:

_Most central nodes by capital gain_
![capital_gain_network](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/graph_network.png)


_Communities 0 (Italy) and 3 (Spain, Portugal, France)_
![community_0](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/community_0.png)
![community_3](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/community_3.png)


_Network with agents_
![agents](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/agents_graph_network.png)


_Leagues' network (in transactions and out transactions)_
![leagues_in](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/leagues_in.png)
![leagues_out](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/leagues_out.png)


_Cagliari Calcio performance and gain_

![cagliari_performances](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/cagliari_gain_performance.png)

_Performance-Gain regression models_

![regression](https://github.com/Firefly55lm/football_market_graph_analysis/blob/9c84211e0b81825bcc81325b180eb1eb53732574/pictures/regressions.png)
